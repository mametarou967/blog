---
title: "<プロトタイプ> 鍵を置くと鍵が置かれていることを表示するプロダクト"
date: 2021-03-13T22:45:06+09:00
draft: false
tags:
- M5StickC
- プロトタイプ
image: images/postIcon/make1.png
description: 鍵置いてるの見えてるのにあえて表示する無意味プロダクト
---


## 背景

物の管理装置の多くは、トレイの開け閉めなどで管理されており、実際そこに物があるかどうかは確認できません。
そこで、物の重量で本当に借用物がかえっているかどうかを確認するプロトタイプを作成したいと思いました。
本来ならば、webで有無を確認できれば良いのですが、今回は圧力センサーを使い、対象物が正しく検出できるかを確認するにとどめます。

## 仕様

* 特定の鍵を置くと、鍵があることがわかるアイコンが表示される
* 鍵を取り除くと、鍵がないことがわかる
※その場でわかるだけですので、これ自体にあまり意味はないと思われます


## 準備するもの

* 圧力センサー(FSR-406)
* ジャンパーワイヤー x 3
* 抵抗 3M(今回は3M * 3)
* M5StickC

### 抵抗値の決定方法

今回対象とする鍵は80～120g程度です。
そのため、100g程度で意味のある電圧値が取得できるような抵抗をはさむ必要があります。
FSR-406のデータシートを確認すると、1MΩ前後であることがわかりました。ここから少しずつ、抵抗を増減させていき、最終的に今回は3ＭΩに落ちつきました。
対象の鍵を置くと2000前後(0～4095)の値が取得できます

{{< figure src="/images/post/鍵を置くと鍵が置かれていることを表示するプロダクト/FSR-406データシート.jpg" class="center" >}}

### FSR-406に付箋を貼っている理由

私が今回使った鍵が少し曲がっているせいか、置き方によって値を拾わなかったりすることがありました。
大きいシートの圧力センサーを使うわけにもいかなかったため、確実に中心に負荷がかかるように、中心をかさ上げする目的で貼っています。

## 接続図と接続した様子

{{< figure src="/images/post/鍵を置くと鍵が置かれていることを表示するプロダクト/接続図.jpg" class="center" >}}
{{< figure src="/images/post/鍵を置くと鍵が置かれていることを表示するプロダクト/接続図2.jpg" class="center" >}}
{{< figure src="/images/post/鍵を置くと鍵が置かれていることを表示するプロダクト/接続図3.jpg" class="center" >}}

## コード

M5StickCに書き込むコードです。コードは[こちら](https://github.com/mametarou967/KagiKenchiForM5StickC)

## 動作する様子

{{< youtube moCO-MKA0OY >}}
